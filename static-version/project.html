<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SMM Календарь - инструмент планирования контента для социальных сетей">
    <title>SMM Календарь - Проект</title>
    
    <!-- Загружаем FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <!-- Загружаем Quill -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    
    <!-- Наши стили -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/project.css">
    <link rel="stylesheet" href="css/fixes.css">
</head>
<body>
    <!-- Сайдбар -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
            <header class="sidebar-header">
                <!-- Кнопка скрытия/разворачивания сайдбара перемещена сюда -->
                <button class="toggle-sidebar-btn" id="toggleSidebar" type="button" aria-label="Переключить видимость боковой панели">
                    <i class="fas fa-chevron-left" aria-hidden="true"></i>
                </button>
            </header>
            
            <nav aria-label="Основная навигация">
                <ul class="sidebar-menu">
                    <li class="sidebar-menu-item">
                        <a href="index.html" class="sidebar-menu-link">
                            <span class="sidebar-menu-icon" aria-hidden="true"><i class="fas fa-home"></i></span>
                            <span>Главная</span>
                        </a>
                    </li>
                    <li class="sidebar-menu-item">
                        <a href="#" class="sidebar-menu-link active" aria-current="page">
                            <span class="sidebar-menu-icon" aria-hidden="true"><i class="fas fa-calendar-alt"></i></span>
                            <span>Календарь</span>
                        </a>
                    </li>
                    <li class="sidebar-menu-item">
                        <a href="#" class="sidebar-menu-link" id="client-info-btn">
                            <span class="sidebar-menu-icon" aria-hidden="true"><i class="fas fa-user"></i></span>
                            <span>О клиенте</span>
                        </a>
                    </li>
                    <li class="sidebar-menu-item">
                        <a href="#" class="sidebar-menu-link" id="change-directory-btn">
                            <span class="sidebar-menu-icon" aria-hidden="true"><i class="fas fa-folder-open"></i></span>
                            <span>Изменить директорию</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <!-- Блок с кнопками в нижней части сайдбара -->
            <footer class="sidebar-footer">
                <div class="sidebar-footer-buttons">
                    <button class="sidebar-button" id="toggle-theme-btn" type="button" aria-label="Переключить светлую/темную тему">
                        <i class="fas fa-moon" aria-hidden="true"></i>
                        <span>Переключить тему</span>
                    </button>
                    <button class="sidebar-button" id="download-csv-btn" type="button">
                        <i class="fas fa-file-download" aria-hidden="true"></i>
                        <span>Скачать CSV проекта</span>
                    </button>
                    <button class="sidebar-button" id="upload-csv-btn" type="button">
                        <i class="fas fa-file-upload" aria-hidden="true"></i>
                        <span>Загрузить CSV</span>
                    </button>
                    <button class="sidebar-button" id="upload-client-info-btn" type="button">
                        <i class="fas fa-user-cog" aria-hidden="true"></i>
                        <span>Загрузить информацию о клиенте</span>
                    </button>
                </div>
            </footer>
        </div>
    </aside>
    
    <!-- Основной контент -->
    <main class="main-content" id="mainContent">
        <section id="calendar" aria-label="Календарь контента">
            <!-- Здесь будет отображаться календарь -->
        </section>
    </main>
    
    <!-- Модальное окно для информации о клиенте -->
    <dialog id="clientInfoModal" class="modal" aria-labelledby="clientInfoTitle">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="clientInfoTitle">Информация о клиенте</h2>
                <button class="modal-close" type="button" aria-label="Закрыть">&times;</button>
            </header>
            <div class="modal-body">
                <!-- Основная информация -->
                <section class="form-section" aria-labelledby="basicInfoTitle">
                    <h3 id="basicInfoTitle">Основная информация</h3>
                    <div class="form-group">
                        <label for="clientName">Название компании</label>
                        <input type="text" id="clientName" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="clientWebsite">Сайт компании</label>
                        <input type="url" id="clientWebsite" class="form-control" placeholder="https://example.com">
                    </div>
                </section>

                <!-- Контакты -->
                <section class="form-section" aria-labelledby="contactInfoTitle">
                    <h3 id="contactInfoTitle">Контактные данные</h3>
                    <div class="form-group">
                        <label for="clientPhone">Телефон</label>
                        <input type="tel" id="clientPhone" class="form-control" placeholder="+7 (123) 456-7890">
                    </div>
                    <div class="form-group">
                        <label for="clientEmail">Email</label>
                        <input type="email" id="clientEmail" class="form-control" placeholder="contact@example.com">
                    </div>
                    <div class="form-group">
                        <label for="clientAddress">Адрес</label>
                        <input type="text" id="clientAddress" class="form-control" placeholder="г. Москва, ул. Примерная, д. 1">
                    </div>
                </section>

                <!-- Социальные сети -->
                <section class="form-section" aria-labelledby="socialNetworksTitle">
                    <h3 id="socialNetworksTitle">Социальные сети</h3>
                    <div class="form-group">
                        <label for="clientInstagram">Instagram</label>
                        <input type="url" id="clientInstagram" class="form-control" placeholder="https://www.instagram.com/username">
                    </div>
                    <div class="form-group">
                        <label for="clientTelegram">Telegram</label>
                        <input type="url" id="clientTelegram" class="form-control" placeholder="https://t.me/username">
                    </div>
                    <div class="form-group">
                        <label for="clientVk">ВКонтакте</label>
                        <input type="url" id="clientVk" class="form-control" placeholder="https://vk.com/username">
                    </div>
                    <div class="form-group">
                        <label for="clientFacebook">Facebook</label>
                        <input type="url" id="clientFacebook" class="form-control" placeholder="https://www.facebook.com/username">
                    </div>
                    <button type="button" id="addSocialField" class="btn btn-secondary btn-sm">Добавить социальную сеть</button>
                    <div id="additionalFieldsContainer" class="additional-fields-container"></div>
                </section>

                <!-- Информация о бренде -->
                <section class="form-section" aria-labelledby="brandInfoTitle">
                    <h3 id="brandInfoTitle">Информация о бренде</h3>
                    <div class="form-group">
                        <label for="clientDescription">Описание компании</label>
                        <textarea id="clientDescription" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="clientUsp">Уникальное торговое предложение (УТП)</label>
                        <textarea id="clientUsp" class="form-control" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="clientTargetAudience">Целевая аудитория</label>
                        <textarea id="clientTargetAudience" class="form-control" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="clientPriceRange">Ценовой диапазон</label>
                        <input type="text" id="clientPriceRange" class="form-control" placeholder="1000-5000 руб.">
                    </div>
                </section>

                <!-- Гайдлайн для контента -->
                <section class="form-section" aria-labelledby="contentGuidelinesTitle">
                    <h3 id="contentGuidelinesTitle">Гайдлайн для контента</h3>
                    <div class="form-group">
                        <label for="clientToneOfVoice">Тон общения</label>
                        <textarea id="clientToneOfVoice" class="form-control" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="clientMainTopics">Основные темы</label>
                        <textarea id="clientMainTopics" class="form-control" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="clientForbiddenTopics">Запрещенные темы</label>
                        <textarea id="clientForbiddenTopics" class="form-control" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="clientHashtags">Хештеги</label>
                        <textarea id="clientHashtags" class="form-control" rows="2"></textarea>
                    </div>
                </section>

                <!-- Настройки дизайна -->
                <section class="form-section" aria-labelledby="designSettingsTitle">
                    <h3 id="designSettingsTitle">Настройки дизайна</h3>
                    <div class="form-group">
                        <label for="clientBrandColors">Фирменные цвета</label>
                        <input type="text" id="clientBrandColors" class="form-control" placeholder="#ff0000, #00ff00, #0000ff">
                    </div>
                    <div class="form-group">
                        <label for="clientPrimaryFont">Основной шрифт</label>
                        <input type="text" id="clientPrimaryFont" class="form-control" placeholder="Roboto, Arial">
                    </div>
                    <div class="form-group">
                        <label for="clientSecondaryFont">Дополнительный шрифт</label>
                        <input type="text" id="clientSecondaryFont" class="form-control" placeholder="Georgia, Times New Roman">
                    </div>
                    <div class="form-group">
                        <label for="clientMainLogo">Основной логотип</label>
                        <input type="text" id="clientMainLogo" class="form-control" placeholder="URL или описание логотипа">
                    </div>
                    <div class="form-group">
                        <label for="clientAltLogo">Альтернативный логотип</label>
                        <input type="text" id="clientAltLogo" class="form-control" placeholder="URL или описание логотипа">
                    </div>
                </section>

                <!-- Мета-информация -->
                <section class="form-section" aria-labelledby="metaInfoTitle">
                    <h3 id="metaInfoTitle">Мета-информация</h3>
                    <div class="form-group">
                        <label for="clientCreated">Дата создания</label>
                        <input type="text" id="clientCreated" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label for="clientLastModified">Последнее изменение</label>
                        <input type="text" id="clientLastModified" class="form-control" readonly>
                    </div>
                </section>
            </div>
            <footer class="modal-footer">
                <button type="button" class="btn btn-secondary modal-cancel">Отмена</button>
                <button type="button" class="btn btn-primary" id="saveClientInfoBtn">Сохранить</button>
            </footer>
        </div>
    </dialog>
    
    <!-- Подключаем дополнительные функции для проекта -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Инициализация сайдбара
        const toggleBtn = document.getElementById('toggleSidebar');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        
        if (toggleBtn && sidebar && mainContent) {
            // Устанавливаем начальное состояние из localStorage
            if (localStorage.getItem('sidebar_collapsed') === 'true') {
                sidebar.classList.add('collapsed');
                mainContent.classList.add('expanded');
            }
            
            // Обработчик клика по кнопке сайдбара
            toggleBtn.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');
                localStorage.setItem('sidebar_collapsed', sidebar.classList.contains('collapsed'));
            });
        }
        
        // Обработчик для кнопки О клиенте
        const clientInfoBtn = document.getElementById('client-info-btn');
        const clientInfoModal = document.getElementById('clientInfoModal');
        
        if (clientInfoBtn && clientInfoModal) {
            clientInfoBtn.addEventListener('click', function() {
                // Загружаем информацию о клиенте
                if (typeof loadClientInfo === 'function') {
                    loadClientInfo();
                }
                // Показываем модальное окно
                if (clientInfoModal.showModal) {
                    clientInfoModal.showModal();
                } else {
                    clientInfoModal.classList.add('active');
                }
            });
            
            // Обработчики закрытия модального окна
            const closeModalBtns = clientInfoModal.querySelectorAll('.modal-close, .modal-cancel');
            closeModalBtns.forEach(function(btn) {
                btn.addEventListener('click', function() {
                    if (clientInfoModal.close) {
                        clientInfoModal.close();
                    } else {
                        clientInfoModal.classList.remove('active');
                    }
                });
            });
            
            // Закрытие модального окна при клике вне его содержимого
            clientInfoModal.addEventListener('click', function(e) {
                if (e.target === clientInfoModal) {
                    if (clientInfoModal.close) {
                        clientInfoModal.close();
                    } else {
                        clientInfoModal.classList.remove('active');
                    }
                }
            });
        }
        
        // Инициализируем тему при загрузке страницы
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Обработчик для кнопки переключения темы
        const themeToggleBtn = document.getElementById('toggle-theme-btn');
        if (themeToggleBtn) {
            themeToggleBtn.addEventListener('click', function() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                // Устанавливаем новую тему
                document.documentElement.setAttribute('data-theme', newTheme);
                
                // Сохраняем выбор пользователя в localStorage
                localStorage.setItem('theme', newTheme);
                
                // Обновляем иконку кнопки
                const iconElement = themeToggleBtn.querySelector('i');
                if (iconElement) {
                    if (newTheme === 'dark') {
                        iconElement.className = 'fas fa-sun';
                    } else {
                        iconElement.className = 'fas fa-moon';
                    }
                }
            });
            
            // Установка правильной иконки при загрузке
            const iconElement = themeToggleBtn.querySelector('i');
            if (iconElement && savedTheme === 'dark') {
                iconElement.className = 'fas fa-sun';
            }
        }
    });
    </script>

    <!-- Инициализация скриптов -->
    <script src="js/filesystem.js"></script>
    <script src="js/project.js"></script>
    <script src="js/fixes.js"></script>
</body>
</html> 